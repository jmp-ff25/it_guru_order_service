# IT Guru Order Service - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
database/
‚îú‚îÄ‚îÄ seeds/              # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ mock_data.sql      # –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ clear_data.sql     # –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö  
‚îÇ   ‚îî‚îÄ‚îÄ show_data.sql      # –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose up -d

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î)
docker exec -it server_it_guru alembic upgrade head

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
bash scripts/load_mock_data.sh
```

### 2. –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
docker exec -i postgres_server psql -U postgres -d consult_db < database/seeds/mock_data.sql

# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
docker exec -i postgres_server psql -U postgres -d consult_db < database/seeds/show_data.sql

# –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
docker exec -i postgres_server psql -U postgres -d consult_db < database/seeds/clear_data.sql
```

## üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–°–∫—Ä–∏–ø—Ç `mock_data.sql` —Å–æ–¥–µ—Ä–∂–∏—Ç:

- **10 –∫–∞—Ç–µ–≥–æ—Ä–∏–π** —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π (–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ ‚Üí –°–º–∞—Ä—Ç—Ñ–æ–Ω—ã/–ù–æ—É—Ç–±—É–∫–∏/–ù–∞—É—à–Ω–∏–∫–∏)
- **14 —Ç–æ–≤–∞—Ä–æ–≤** —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
- **5 –∫–ª–∏–µ–Ω—Ç–æ–≤** –∏–∑ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
- **3 –∑–∞–∫–∞–∑–∞** –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–∞—Ö (created/paid/shipped)  
- **6 –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫–∞–∑–æ–≤**
- **15 —Å–≤—è–∑–µ–π** —Ç–æ–≤–∞—Ä-–∫–∞—Ç–µ–≥–æ—Ä–∏—è (M:N)

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ö–æ–Ω—Å–æ–ª—å PostgreSQL
docker exec -it postgres_server psql -U postgres -d consult_db

# –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
docker exec postgres_server psql -U postgres -d consult_db -c "\\dt"

# –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
docker exec postgres_server psql -U postgres -d consult_db -c "
SELECT '–ö–∞—Ç–µ–≥–æ—Ä–∏–π' as type, COUNT(*)::text as count FROM categories
UNION ALL SELECT '–¢–æ–≤–∞—Ä–æ–≤', COUNT(*)::text FROM nomenclature  
UNION ALL SELECT '–ö–ª–∏–µ–Ω—Ç–æ–≤', COUNT(*)::text FROM client
UNION ALL SELECT '–ó–∞–∫–∞–∑–æ–≤', COUNT(*)::text FROM \"order\";
"
```

### –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
docker exec postgres_server psql -U postgres -d consult_db -c "
TRUNCATE categories, nomenclature, client, \"order\", orderitem, nomenclature_categories 
RESTART IDENTITY CASCADE;
"

# –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker exec -it server_it_guru alembic downgrade base
docker exec -it server_it_guru alembic upgrade head
```

## üìù –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **–ú–∏–≥—Ä–∞—Ü–∏–∏** (`migrations/`) - —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (DDL)
- **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** (`database/seeds/`) - –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã–µ** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã/–±—ç–∫–∞–ø—ã (–Ω–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –°–∫—Ä–∏–ø—Ç `mock_data.sql` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã –ø—É—Å—Ç—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π (sequences)

### –°—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **Development** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mock_data.sql`
- **Testing** - —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ fixtures
- **Staging** - –∫–æ–ø–∏—è –ø—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã—Ö (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã)
- **Production** - —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–±—ç–∫–∞–ø—ã, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è)